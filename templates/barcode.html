{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card shadow-sm">
      <div class="card-body text-center">
        <h4 class="card-title mb-4">Product Barcode/QR Code</h4>
        
        <div class="mb-4">
          <h5>{{ product.name }}</h5>
          <p class="text-muted">SKU: {{ product.sku }}</p>
          {% if product.category %}<span class="badge bg-secondary">{{ product.category }}</span>{% endif %}
          {% if product.size %}<span class="badge bg-info">{{ product.size }}</span>{% endif %}
          {% if product.color %}<span class="badge bg-primary">{{ product.color }}</span>{% endif %}
        </div>
        
        <div class="row g-4 mb-4">
          <div class="col-md-6">
            <h6>Barcode</h6>
            <div class="border p-3 bg-white">
              <svg id="barcode"></svg>
            </div>
          </div>
          <div class="col-md-6">
            <h6>QR Code</h6>
            <div class="border p-3 bg-white">
              <div id="qrcode"></div>
            </div>
          </div>
        </div>
        
        <div class="d-flex gap-2 justify-content-center">
          <button onclick="printBarcode()" class="btn btn-primary">Print Barcode</button>
          <button onclick="printQR()" class="btn btn-success">Print QR Code</button>
          <a href="{{ url_for('product_search') }}" class="btn btn-outline-secondary">Back to Search</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script>
  // Generate Barcode
  JsBarcode("#barcode", "{{ product.sku }}", {
    format: "CODE128",
    width: 2,
    height: 60,
    displayValue: true
  });
  
  // Generate QR Code
  new QRCode(document.getElementById("qrcode"), {
    text: "{{ product.sku }}|{{ product.name }}",
    width: 200,
    height: 200,
    colorDark: "#000000",
    colorLight: "#ffffff",
  });
  
  function printBarcode() {
    window.print();
  }
  
  function printQR() {
    window.print();
  }
</script>

<style>
  @media print {
    .navbar, .btn, .card-footer { display: none !important; }
    .card { border: none !important; box-shadow: none !important; }
  }
</style>
{% endblock %}
